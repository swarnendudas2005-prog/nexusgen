{% extends 'base.html' %}
{% block content %}
<div class="text-center mt-4 mb-4 pb-4 border-bottom">
    
    <h1 class="text-success mb-3" style="font-family: 'Lobster', cursive; font-size: 4.5rem; letter-spacing: 2px;">
        {{ translate('KrishiBazaar') }}
    </h1>
    
    <p class="text-muted fw-bold fs-5">{{ translate('Direct Farmer-to-Consumer Market') }}</p>
    
    {% if not current_user.is_authenticated %}
        <a href="/register" class="btn btn-success shadow-sm mt-2 px-4 rounded-pill">{{ translate('Get Started') }}</a>
    {% else %}
        <a href="/dashboard" class="btn btn-success shadow-sm mt-2 px-4 rounded-pill">{{ translate('Go to Dashboard') }}</a>
    {% endif %}
</div>

<div class="container mb-5">
    <h4 class="text-center mb-4 fw-bold">ğŸŒ¾ {{ translate('Fresh Produce Available Now') }} ğŸŒ¾</h4>
    
    <div class="row g-3 justify-content-center">
        {% for p in products %}
        <div class="col-6 col-md-4 col-lg-3">
            <div class="card shadow-sm h-100 border-0 overflow-hidden">
                <div style="height: 140px; overflow: hidden; background: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                    {% if p.image and p.image != 'default.jpg' %}
                        <img src="{{ url_for('static', filename='product_images/' + p.image) }}" class="w-100 h-100" style="object-fit: cover;" alt="{{ p.name }}">
                    {% else %}
                        <span class="fs-1">ğŸ</span>
                    {% endif %}
                </div>
                
                <div class="card-body p-2 d-flex flex-column text-center">
                    <h6 class="card-title fw-bold text-dark text-truncate mb-1" title="{{ translate(p.name) }}">
                        {{ translate(p.name) }}
                    </h6>
                    
                    <p class="mb-2 text-secondary" style="font-size: 0.75rem;">
                        ğŸ“ 
                        {% if p.location %}
                            <span class="fw-bold">{{ translate(p.location) }}</span>
                        {% else %}
                            <span class="fst-italic">{{ translate('No location') }}</span>
                        {% endif %}
                    </p>

                    <div class="mt-auto">
                        <span class="text-success fw-bold fs-6 d-block mb-2">â‚¹{{ p.price }}/kg</span>
                        
                        {% if current_user.is_authenticated %}
                            <a href="/dashboard" class="btn btn-outline-success btn-sm w-100 fw-bold" style="font-size: 0.8rem;">{{ translate('Buy Now') }}</a>
                        {% else %}
                            <a href="/login" class="btn btn-success btn-sm w-100 fw-bold" style="font-size: 0.8rem;">{{ translate('Login') }}</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center text-muted py-5 bg-white rounded shadow-sm border">
            <h5 class="mb-3">{{ translate('No produce listed yet.') }}</h5>
            <p class="mb-0 small">{{ translate('Farmers will be adding their fresh harvest soon! Check back later.') }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}